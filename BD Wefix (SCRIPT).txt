CREATE DATABASE WEFIX

USE WEFIX 
GO

CREATE TABLE MARCAS
(
	idMarca INT IDENTITY(1,1),
	descripcion VARCHAR(30)
	CONSTRAINT pkMARCAS PRIMARY KEY(idMarca)
)

CREATE TABLE CLIENTES
(
	idCliente INT IDENTITY(1,1),
	nombre VARCHAR(30),
	apellido VARCHAR(30),
	telefono1 VARCHAR(30),
	telefono2 VARCHAR(30),
	email VARCHAR(50)
	CONSTRAINT pkCLIENTES PRIMARY KEY(idCliente)
)

CREATE TABLE USUARIOS
(
	idUsuario INT IDENTITY(1,1),
	usuario VARCHAR(20),
	contraseña VARCHAR(20)
	CONSTRAINT pkUSUARIOS PRIMARY KEY(idUsuario)
)

CREATE TABLE CATEGORIAS
(
	idCategoria INT IDENTITY (1,1),
	descripcion VARCHAR(50),
	CONSTRAINT pkCATEGORIAS PRIMARY KEY (idCategoria)
)

CREATE TABLE ACCESORIOS
(
	idAccesorio INT IDENTITY (1,1),
	descripcion VARCHAR(50),
	idCategoria INT,
	cantidad INT,
	monto DECIMAL(18,0)

	CONSTRAINT pkACCESORIOS PRIMARY KEY (idAccesorio),

	CONSTRAINT fkACCESORIOS_CATEGORIAS FOREIGN KEY (idCategoria)
	REFERENCES CATEGORIAS(idCategoria)

)

CREATE TABLE VENTA_ACCESORIOS
(
	idVentaAccesorios INT IDENTITY(1,1),
	idAccesorio INT,
	cantidad INT,
	monto DECIMAL(18,0),
	idUsuario INT,
	fecha VARCHAR(20)

	CONSTRAINT pkVENTA_ACCESORIOS PRIMARY KEY(idVentaAccesorios),
	
	CONSTRAINT fkVENTA_ACCESORIOS_ACCESORIOS FOREIGN KEY(idAccesorio)
	REFERENCES ACCESORIOS(idAccesorio),

	CONSTRAINT fkVENTA_ACCESORIOS_USUARIOS FOREIGN KEY(idUsuario)
	REFERENCES USUARIOS(idUsuario)

)

CREATE TABLE ESTADO_REPARACIONES
(
	idEstadoReparacion INT IDENTITY(1,1),
	estado VARCHAR(50)

	CONSTRAINT pkESTADO_REPARACIONES PRIMARY KEY(idEstadoReparacion)
)

CREATE TABLE ORDENES
(
	cod_orden_id INT IDENTITY(1,1),
	cod_orden VARCHAR(5) NOT NULL,
	idCliente INT,
	idMarca INT,
	idUsuario INT, 
	idEstadoReparacion INT,
	modelo VARCHAR(50),
	problema VARCHAR(200),
	contraseña VARCHAR(30),
	notas VARCHAR(50),
	costo decimal(18,0),
	fecha VARCHAR(20)

	CONSTRAINT pkOREDENES PRIMARY KEY(cod_orden_id),

	CONSTRAINT fkCLIENTE_ORDENES FOREIGN KEY(idCliente)
	REFERENCES CLIENTES(idCliente),

	CONSTRAINT fkMARCAS_ORDENES FOREIGN KEY(idMarca)
	REFERENCES MARCAS(idMarca),

	CONSTRAINT fkESTADO_REPARACIONES_ORDENES FOREIGN KEY(idEstadoReparacion)
	REFERENCES ESTADO_REPARACIONES(idEstadoReparacion),

	--CONSTRAINT fkMODELOS_ORDENDES FOREIGN KEY(idModelo)
	--REFERENCES MODELOS(idModelo),

	CONSTRAINT fkUSUARIOS_ORDENES FOREIGN KEY(idUsuario)
	REFERENCES USUARIOS(idUsuario)
)


INSERT INTO ESTADO_REPARACIONES(estado) VALUES('En proceso')
INSERT INTO ESTADO_REPARACIONES(estado) VALUES('Finalizado')

clave para crear usuarios = "Admin2022"
